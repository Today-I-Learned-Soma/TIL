# 네트워크: VPC 1

## 인터넷과 네트워크

### 인터넷 프로토콜

- 인터넷 프로토콜에는 IPv4, IPv6이 있음
- IPv4의 주소 고갈, 멀티미디어 서비스 대응 미약 등의 문제를 해결하기 위해 IPv6가 등장
- IPv4는 32비트 0~255 네개 (ex) 193.32.216.9
- IPv6 주소의 128비트는 콜론으로 분리된 8개의 16비트 16진수 블록. (ex) 2dfc:0:0:0:0217:cbff:fe8c:0
- IPv4 주소는 “클래스”로 분리되는데, 클래스 A 네트워크는 소수의 대형 네트워크를 위한 것이고, 클래스 C 네트워크는 수천 개의 소형 네트워크를 위한 것이고, 클래스 B 네트워크는 그 사이에 있는 것임
- IPv6는 서브넷팅을 사용하여 주어진 주소 공간 할당에 맞게 네트워크 크기를 조정함
- IPv4는 0.0.0.0을 미지정 주소로 사용하고 클래스 유형 주소(127.0.0.1)를 루프백에 사용하고 IPv6는 미지정 주소에는 ::을, 루프백에는 ::1을 사용합니다.

### 네트워크

- 공인망: 인터넷
- 사설망: 인트라넷 (회사내부 등)
  - 인터넷 상에 공개하고 싶지 않고 우리끼리만 연결해서 접근하고 싶다!
  - 회사, 기관 등의 조직에서 인트라넷을 구축해서 사용
  - AWS에서 VPC를 만든다 == 인트라넷(사설망)을 만든다

## VPC

> Virtual Private Cloud ☁️

### CIDR

- Classless Inter Domain Routing
- IP 주소공간을 표현하는 방법
- (ex) 10.8.0.016
- 전체 ip 주소는 32bit인데 10.8까지는 고정(16bit), 뒤에는 가변(16bit)
- 10.0.0.0~10.8.255.255까지가 이것이 나타내는 Ip 주소 공간
- 가독성 상 8씩 늘어나도록 설정한는 경우가 많음
- VPC는 여러 CIDR을 가질 수 있는데 기본적으로는 하나정도 가짐

### AWS VPC

#### region or global?

> AWS service는 account level(=global), regional level, VPC level 등의 기준을 이해하고 접근해야함

- 계정단위(전세계 ok)
- 지역단위(서울지역에 만들어도 오사카에 다시 만들어야함)
- VPC별

#### VPC 톺아보기

- AWS 계정 생성하면 기본 VPC 생김
- 일반 개발자들은 default VPC만으로도 충분함

##### Internet gateway

- 퍼블릭 IP 주소를 지닌 인스턴스를 인터넷과 연결하면, 인터넷에서 들어오는 요청을 수신할 수 있도록 하는 역할
- default VPC는 gateway종류는 internet gateway뿐임

##### AZ (Availability Zone)

- az란 availibility zone(가용영역) = 데이터 센터
- 한국은 az 1,2,3,4 있음 (많은 편)
- id: ap-northeast-2a, nane: apne2-az1(이때 id와 name의 맨뒤 숫자와 알파벳은 꼭 순서 매치되지 않음)
  - 사용자마다 az ID값이 가리키는 데이터 센터는 같지만, 그냥 AZ는 다를 수 있다. 계정을 만들때 정해짐. 사람들이 모두 한 데이터센터를 선호할 수 있기 때문
  - 따라서 서로 다른 계정끼리 연결할때 id기준으로 해야함
- az마다 subnet이 각각 있음 (용도별로 쪼개놓은 것)
- 한 서브넷은 한 az에 속한다
  - 데이터베이스를 위치시키고 싶다 - db subnet을 각 az에 만들어주는 것이 좋다.
  - 각각의 subnet마다 CIDR이 있고 이것은 당연히 전체 CIDR에 포함됨
- 서로 다른 az간의 트래픽이 발생할 수록 비싸짐

##### Router Table

- to be continued...
