- 이 실행환경을 AWS가 제공해주기 때문에 사용자는 Function만 만들면 된다.
    1. Runtime
    2. Memory크기만 지정
        1. Memory크기에 따라 cpu, network가 비례해서 지정된다.
    3. timeout을 지정해줘야 한다.(1초~15분)
    4. role(실행역할)
    - EC2에서 S3로 접근할 때 api를 호출해야 하지만 인증과 권한(IAM)을 확인해야 한다.
        - 사용자한테 직접 키를 부여하는 것이 아니라 역할을 만들어서 권한을 부여한다.
        - AWS 관계된것만 권한을 부여할 수 있기에 app자체에는 권한을 줄 수 없다.
        - 따라서 app을 감싸고 있는 ec2에게 권한을 준다.
            - EC2 Instance Profile로 인해 관리가 된다.
        - 만약 람다를 사용하면 람다 자체에 권한을 부여한다.
            - Execution Role이라고 칭한다.
    
    ## Amazon SQS
    
    - 메시지 대기열
        - 종류
            - 표준 주제
                - 거의 제한이 없는 초당 API 호출
                    - 메시지 처리를 많이 해야할 때 사용
                - 순서 미지정
                    - 만약에 순서를 지정하고 싶을 경우 app단에서 설정을 해줘야 한다.
                - 최소 1회
            - FIFO 주제
                - `제한된 초당 API호출`
                - 순서 지정
        - 메시지가 중복처리가 될 수 있기에 삭제를 해줘야 한다.
        - 소결합 형식
            - 어플리케이션 간에 종속성이 적다.
        - 수명주기
            - 생산자가 메시지를 대기열에 전송 → `메시지는 중복저장`이된다.
            - 소바자가 메시지를 Polling하면 메시지를 선택은 불가능하지만 개수선택은 가능하다.
            - 가시성 시간이 제한된다
                - 다른 소비자가 해당 메시지에 접근불가능한 시간을 지정할 수 있다.
                    - 메시지가 처리된 후 메시지를 삭제해야 중복데이터 처리를 방지할 수 있다.
                        - 가시성 시간 내에 해야 한다.
        - 짧은 폴링
            - 메시지가 있는데도 메시지를 가져올 수 없는 경우도 존재
                - api호출을 여러번 해야한다.
        - 긴폴링
            - 서버  전체를 샘플링 한다음에 max개수가 채워질때까지 대기를 하고 한번에 보낸다.
        - 배달 못한 편지 대기열
            - 계속 polling을 하는데도 못가져오는 경우에 왜 못가져오는지 모아놓은 대기열
            - 디버깅용이다.
        - producer과 consumer가 1대 1관계
            - 소비자가 polling 방식으로 메시지를 가져가는 방식
                - 비동기 처리이다.
                - 
            
    
    ### Amazon SNS(Simple Notification Service)
    
    - 쉬운 서비스이다.
    - Topic에 따른 구독자를 설정
        - 1대 n 관계
    - 게시하는 쪽에서 메시지를 게시하면 자동으로 push 가 된다.
    - 관리자에게 알려준다.
        - 알림기능에 많이 사용된다
    - 람다에 연결을 시켜서 자동화시킬 때 많이 이용이 된다.
    - 회수는 불가능하다.
    
    ## 실습
    
    1. s3의 이벤트 기능을 통해 SNS주체에게 전달
    2. 대기열을 구독자 형식으로 구성
    3. 
    
    ## 람다 이용
    
    - 밖에서 csv 파일을 넣었을 때 해당 과정을 읽어서 db에 넣어주는 작업(자동화) 그런것들을 해주는 역할
    - app크기가 별로 크지 않아야 한다.
    - **람다랑 s3랑 연동해서 넣어놓는 역할을 해도 좋을 듯**
    - 이벤트가 발생할 때 계속 수동으로 체크할 수 없으니까 그걸 체크해주는 역할
    - s3에 도면을 넣고 → 람다 안에 함수 자체를 넣어서 그걸 밖으로 뺀 뒤에 sqs로 넣으면 될 듯
    
    EC2를 이용하면 사용하든 안하든 비용이 발생한다.
    
    - S3, dynamodb, sqs, sns → serverless
        - 타입같은거 지정을 안함
    - RDS
        - 타입을 지정해야 함
        
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e4309aaa-d32a-4568-a0aa-448b61a53c7d/Untitled.png)
    
    - 람다에서 이벤트가 발생하면 다른 람다로 연결될 수 있도록 구성
    
    [완전 우리 서비스와 동일]
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/335c013b-1239-4ed5-bfd7-c563deef1f40/Untitled.png)
    

## API Gateway

- API 의 관문이 되어주는 서비스
- 서버리스이다.
- API 프런트엔드를 생성
- 엣지 서비스
    - 엔드 유저와 맞닿는 서비스
        - 공격을 받을 수 있기 때문에 DDoS공격을 막을 수 있도록 WAF를 사용할 수 있는 기능이 존재한다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d7059941-afce-4ebb-a80a-6c0d2c62e188/Untitled.png)

- 누군가 API를 호출하면 바로 람다를 연결하도록 많이 사용이 된다.

## Kinesis

- 데이터 수집 및 분석을 위한 서비스
- 클릭한 정보들을 그때그때 가져다가 분석할 수 있는 서비스
    - 실시간으로

### Step Functions

- 함수당 순서를 지정해줄 수 있는 서비스
- 순서도를 만들어주는 서비스
- 순서가 바꼈을 때 소스코드 변경을 할 필요가 없다
- json형태로 만들어진다.
- 순차처리/병렬처리 모두 가능하다.

## 컨테이너 서비스

- X-Ray를 사용해서 서비스 모니터링을 한다.
-
