## Apache Kafka

---

- 분산 스트리밍 플랫폼. 데이터 파이프 라인을 만들 때 주로 사용되는 오픈소스 솔루션
- 데이터를 실시간으로 관리하고 보내기 위한 분산 스트리밍 플랫폼
- 특징
    - Publisher Subscriber 모델
        - 데이터 큐를 중간에 두고 서로 독립적으로 데이터를 생산, 소비함
        - 서로 간에 의존성이 없으므로 안정적으로 데이터 처리 가능
    - 고가용성 및 확장성
        - 분산 처리를 통해 빠른 데이터 처리가 가능
        - 안정성 및 성능을 향상 시키는 Scale-out이 가능
    - 디스크 순차 저장 및 처리
        - 메세지를 디스크에 순차적으로 저장
        - 장점
            - 서버 장애 발생해도 디스크에 저장되어 있으므로 유실 걱정X
            - 디스크 I/O가 줄어들어 성능이 빨라진다.
            - 분산처리
- 아키텍처

![1-1](https://user-images.githubusercontent.com/84591000/179554074-9f2639da-7519-4b7d-9b44-db7be9e65983.png)

- 클러스터를 중심으로 프로듀서와 컨슈머가 데이터를 push/pull하는 구조
    - 비동기로 동작
- 구성요소
    - `프로듀서`
        - 데이터를 발생, 카프카 클러스터에 적재하는 프로세스
    - `카프카 클러스터`
        - 카프카 서버로 이루어진 클러스터
        - 여러 대의 컴퓨터들이 연결되어 하나의 시스템처럼 동작하는 컴퓨터들의 집합
        - 요소
            - 브로커
                - 카프카 서버를 의미
                - 생산자와 소비자와의 중재자 역할
            - 주키퍼
                - 카프카 브로커를 하나의 클러스터로 코디네이팅하는 역할
                - 카프카 클러스터의 리더를 발탁하는 방식 제공
            - 토픽
                - 어떤 데이터를 관리하는 하나의 그룹
                - 보내는 메시지를 구분하기 위한 카테고리화
            - 파티션
                - 토픽 당 데이터를 분산 처리하는 단위
                - 토픽을 구성하는 데이터 저장소. 수평확장이 가능
                - 카프카 옵션에서 지정한 replica의 수만큼 파티션이 각 서버들에게 복제
            - 리더, 팔로워
                - 각 파티션당 `복제된 파티션` 중에서 `하나의 리더`가 선출
                    - 모든 읽기, 쓰기 연산 담당
                - 나머지는 팔로워
                    - 리더의 데이터를 복사하는 역할만 담당
            
            *`파티션의 수는 절대 줄일 수 없다` → 파티션 증가는 신중하게 고려해야 함*
            
    - 컨슈머 그룹
        - 프로듀서에서 전달한 데이터를 브로커에게 요청하여 메시지를 소비하는 역할
        - 자신이 가져와야 하는 토픽 안의 파티션의 데이터를 pull하게 되고 각 컨슈머들이 파티션이 나뉘어져 있는 만큼 데이터를 처리
- 파티션 읽기/쓰기
    - 읽기, 쓰기 연산은 리더 파티션들에게만 적용 → 나머지는 각 파티션들의 복제본들에게로 복사
    - 카프카는 데이터를  순차적으로 저장 → 프로듀서는 append형식으로 write연산
    
    ![1-2](https://user-images.githubusercontent.com/84591000/179554082-6dfdaedc-bbc3-41a8-9b7c-f5b6a2c6caea.png)
    
    - 각 컨슈머들은 파티션의 오프셋을 기준으로 데이터를 순차적으로 처리
        - 컨슈머 그룹으로 나뉘며 `같은 컨슈머 그룹 내에 있는 컨슈머는 같은 파티션의 데이터 처리 불가`
    
    ### Pub-Sub 모델
    
    ---
    
    Publisher가 보내는 메시지를 Topic이라는 카테고리로 묶어 보냄 → Subscriber는 해당 Topic을 구독함으로써 메시지를 받는 모델
    
    - 특징
        
        ![1-3](https://user-images.githubusercontent.com/84591000/179554090-aa0d9bf4-bcbb-4ab2-b57d-7c273c7c989c.png)
        
    - 장점
        - 대용량의 데이터 처리 용이
        - 메시지 빠르게 처리 가능
        - 복제, 파티셔닝 → 확장 가능
    - 용도
        - 끊임없이 들어오는 데이터를 일괄적으로 묶어서 데이터를 처리
        - 실시간으로 데이터를 처리 및 가공 → 다른 서비스에 데이터 전달
        - 사용자의 홈페이지 클릭 수, 상품을 바라보는 빈도 및 시간, 주문 및 환불 서비스 등 데이터를 수집/분석 가능
        
        ---
        

---

## 느낀점

---

- 카공을 할 때는 서로 앞보면서 해야한다!
- 오고 갈 때 멘토님이 주신 URL읽기

## 내일 할 일

---

- rest api 구축하기
- 스프링 환경 설정
